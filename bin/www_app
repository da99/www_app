#!/usr/bin/env bash
# -*- bash -*-
#
#
action="$1"
shift
set -u -e -o pipefail

case "$action" in
  "help")
    echo "# ===================="
    echo "www_app help"
    echo "www_app Public"
    echo "www_app upgrade_js"
    echo "# ===================="
  ;;

  "Public")
    dir=$( cd "$( dirname "${BASH_SOURCE[0]}" )/.." && pwd )
    path = "$dir/lib/public"
    public_dir = "Public/www_app-$(cat "$dir/VERSION")"
    cp -r "${path}/" "${public_dir}/"
  ;;

  "upgrade_js")

    echo "
      Must automate downloading of LATEST (security reason)
      underscore, jquery, etc.
    " 1>&2
    echo 1
    # args   = ARGV.dup

    # applet_file = File.join File.dirname(File.dirname(__FILE__)), "lib/www_app.js"

    # target_dir = if ARGV[1]
                   # ARGV[1]
                 # else
                   # Dir.pwd
                 # end

    # new_file = File.join target_dir, "www_app.js"
    # FileUtils.cp applet_file, new_file
    # puts "#=== From:  #{applet_file}"
    # puts "#=== Wrote: #{new_file}"
  ;;


  *)
    echo "Unknown option: $action" 1>&2
    exit 1
  ;;
esac

