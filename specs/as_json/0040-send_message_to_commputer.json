
[
  {
    "it" : "runs a computer in its own fork",
    "input": [
      "my val", "is", [1],
      "my computer", "is a computer", [
        "my val", "is", [2],
        "print", ["get", ["my val"]]
      ],
      "my computer", []
    ],
    "output" : [
      "console should ==", ["2"]
    ]
  },

  {
    "it" : "fails with \"Value not found:\" if computer attempts to get an external value",
    "input": [
      "my val", "is", [1],
      "my computer", "is a computer", [
        "get", ["my val"]
      ],
      "my computer", []
    ],
    "output" : [
      "should raise", ["Value not found:"],
      "message should match", ["my val"]
    ]
  },

  {
    "it" : "puts last value of a stack when computer finishes processing message",
    "input" :[
      "my computer", "is a computer", [
        1
      ],
      "my computer", []
    ],
    "output" : [
      "stack should ==", [{"IS": ["COMPUTER"], "VALUE": "MY COMPUTER"}, 1]
    ]
  },

  {
    "it" : "runs a local computer first.",
    "input" : [
      "yo", "is a computer", [ "print", ["yo yo"] ],
      "my func", "is a computer", [
         "yo", "is a computer", [ "print", ["hello"] ],
         "yo", []
      ],
      "my func", []
    ],
    "output" : [
      "last console message should ==", ["\"hello\""]
    ]
  },

  {
    "it" : "runs a function from parent computer, if not found locally",
    "input" : [
      "top_func", "is a computer", [ "print", ["yo yo: from top"] ],
      "reg_func", "is a computer", [
         "top_func", []
      ],
      "reg_func", []
    ],
    "output" : [
      "last console message should ==", ["\"yo yo: from top\""]
    ]
  },

  {
    "it" : "places a null on the stack if an empty computer is sent a message",
    "input" : [
      "my func", "is a computer", [
      ],
      "my func", []
    ],
    "output" : [
      "stack should ==", [{"IS":["COMPUTER"], "VALUE": "MY FUNC"}, null]
    ]
  },

  {
    "it": "does not evaluate the args if the computer is not found.",
    "input" : [
      "the computer", [ "another computer", []]
    ],
    "output" : [
      "should raise", ["Computer not found:"],
      "message should match", ["the computer"]
    ]
  }

]
